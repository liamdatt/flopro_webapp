<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ service.name }} - Overview</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-black: #0a0a0b;
            --secondary-black: #1a1a1d;
            --primary-blue: #0066ff;
            --electric-blue: #00d4ff;
            --pure-white: #ffffff;
            --light-gray: #e9ecef;
            --medium-gray: #6c757d;
            --glass: rgba(255,255,255,0.1);
            --glass-border: rgba(255,255,255,0.2);
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background:linear-gradient(135deg,#0a0a0b,#1a1a1d); color:var(--pure-white); }
        .container { max-width:1200px; margin:0 auto; padding:2rem; }
        .heading { display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem; }
        .title { font-size:1.75rem; font-weight:800; background:linear-gradient(135deg,var(--pure-white),var(--electric-blue)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .back { color:var(--light-gray); text-decoration:none; border:1px solid var(--glass-border); padding:.5rem 1rem; border-radius:8px; }
        .back:hover { color:var(--pure-white); border-color:var(--electric-blue); }
        .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem; margin-bottom:2rem; }
        .card { background:var(--glass); border:1px solid var(--glass-border); border-radius:16px; padding:1.25rem; backdrop-filter:blur(16px); }
        .metric { font-size:2rem; font-weight:800; margin-top:.5rem; background:linear-gradient(135deg,var(--pure-white),var(--electric-blue)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .label { color:var(--medium-gray); font-weight:600; }
        .table-wrap { background:var(--glass); border:1px solid var(--glass-border); border-radius:16px; overflow:hidden; }
        table { width:100%; border-collapse:collapse; }
        thead { background:rgba(255,255,255,0.04); }
        th, td { padding:1rem; border-bottom:1px solid var(--glass-border); text-align:left; }
        tr:hover td { background:rgba(255,255,255,0.03); }
        .muted { color:var(--medium-gray); }
        .pill { display:inline-block; padding:.25rem .5rem; border-radius:999px; border:1px solid var(--glass-border); }
        .actions { display:flex; gap:.5rem; }
        .btn { padding:.5rem .9rem; border:none; border-radius:8px; text-decoration:none; font-weight:600; cursor:pointer; }
        .btn-primary { background:linear-gradient(135deg,#0066ff,#00d4ff); color:#fff; }
        .btn-danger { background:#ff4757; color:#fff; }
        .inline-form { display:inline; }
    </style>
    </head>
<body>
    <div class="container">
        <div class="heading">
            <h1 class="title"><i class="fas fa-calculator"></i> {{ service.name }}</h1>
            <a href="{% url 'core:dashboard' %}" class="back"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
        </div>

        <div class="grid">
            <div class="card">
                <div class="label">Phone</div>
                <div class="metric" style="font-size:1.25rem;">{{ phone }}</div>
            </div>
            <div class="card">
                <div class="label">Monthly Budget</div>
                <div class="metric">${{ budget }}</div>
                <form class="inline-form" method="post" action="{% url 'core:update_budget' service.slug %}" style="margin-top:.75rem;">
                    {% csrf_token %}
                    <input type="number" step="0.01" name="budget_amount" placeholder="Update budget" style="padding:.5rem; border-radius:8px; border:1px solid var(--glass-border); background:rgba(255,255,255,0.06); color:#fff;">
                    <button type="submit" class="btn btn-primary">Save</button>
                </form>
            </div>
            <div class="card">
                <div class="label">Total Spent</div>
                <div class="metric">${{ spent }}</div>
            </div>
            <div class="card">
                <div class="label">Remaining</div>
                <div class="metric">${{ remaining }}</div>
            </div>
        </div>

        <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th>Transaction</th>
                        <th class="muted">Date</th>
                        <th>Amount</th>
                        <th class="muted">Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for t in transactions %}
                    <tr>
                        <td>{{ t.name }}</td>
                        <td class="muted">{{ t.date }}</td>
                        <td>${{ t.total }}</td>
                        <td>
                            <form class="inline-form" method="post" action="{% url 'core:delete_transaction' service.slug t.id %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger"><i class="fas fa-trash"></i> Delete</button>
                            </form>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="3" class="muted">No transactions yet.</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>

